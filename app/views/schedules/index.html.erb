<div class="schedule_container">
    <h1>Schedule</h1>

    <% #create a loop that makes columns for each of the times in the slots. %>
    <% #each table row will correspond to a mentor %>
    <% #appointments that do not have a mentee id will appear as blue %>
    <% #appointments that do have a mentee id will appear as green %>
    <table>
      <thead>
        <tr>
          <td>Mentor Name</td>
        <% @times.each do |time| %>
          <td class="new_appt"><%= datetime_format(time) %>
            <div class="hidden">
              <h3>Add Appointment</h3>
              <%= form_for :appointment do |f| %>
              <%= f.label "Start Time" %>
              <%= f.datetime_field :start_time, :value => time, :disabled => true %>
              <br><br>
              <%= f.button "Cancel", :type => "button", :class =>"appt_close btn btn-success"  %>&nbsp;<%= f.submit "Submit", :class =>"btn btn-success"  %>
              <% end %>
            </div>
          </td>
        <% end %>
        </tr>
      </thead>
      <tbody>
      <% @mentors.each do |mentor| %>
        <tr>
          <td><%= mentor.name %></td>
          <% @times.each do |time| %>
            <% appointment = mentor.appointments.where(:start_time => time-5.hours).first %>
            <% if appointment %>
              <% if appointment.mentee_id %>
              <td class="filled">
              <% else %>
              <td class="available">
              <% end %>
            <% else %>
            <td>
            <% end %>
          </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
